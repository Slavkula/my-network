В новой версии добавляю сегмент на роутерах микротик.
Топология простенькая: https://github.com/Slavkula/my-network/blob/main/PNG/ver.1.37112023.png
Я не нашёл модулей ансибл для настройки всего, что хочу, поэтому буду писать как раньше не используя их. Хороший плюс в том, что настройки микротиков
можно делать в одну строку, или по крайней мере я пока не наткнулся на обратное. Минус попался в самом начале: если не указаны определённые условия, то плейбук будет выдавать ошибку.
Например: настраивал адреса интерфейсов, если их нет, то выдаётся ошибка и работа плейбука прерывается. С такими условиями плейбуки могут выглядеть громоздко, поэтому я использую
на этой сети плейбуки с вложениями. Попробую новую для себя фичу ансибла и заодно попробую уложить все настройки в один плейбук. Версию буду использовать только эту, постоянно 
дополняя её. И один основной плейбук: https://github.com/Slavkula/my-network/blob/main/playbooks/mikrotik/full_implementing
Дописывая по ходу освоения, все плейбуки будут добавляться в соответствующую директорию. Синтаксис для вложенных несколько отличается от самостоятельных, добавлять их буду с 
учётом этого фактора.

Основной плейбук находится здесь: https://github.com/Slavkula/my-network/blob/main/playbooks/mikrotik/full_implementing.yml
1. Файл переменных.
2. Настройка hostname.
3. Настройка адресов интерфейсов.
4. Настройка лупбэк\бридж интерфейсов.
5. Добавляем локального пользователя с правами просмотра.
6. Настройка OSPFv2, анонс лупбеков и интерфейсов. Физические интерфейсы - отдельные переменные.
7. Настройка eBGP. Только для R22.
8. Настройка NAT. Только для R22.
9. Добавлен туннель и шифрование PSK.
