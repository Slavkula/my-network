Добавляю BGP.
Чтобы не делать полносвязный iBGP настрою роутеры 5 и 8 как Route reflector.
https://github.com/Slavkula/my-network/blob/main/PNG/ver.1.24112023.1.png

1. Настраиваю клиентов: https://github.com/Slavkula/my-network/blob/main/playbooks/BGP_RR_clients

2. Настраиваю RR: https://github.com/Slavkula/my-network/blob/main/playbooks/BGP_RR
В плейбукe в скобках указаны оба адреса рефлекторов, лишний в каждом случае я убираю.

3. Теперь надо снизить нагрузку на рефлекторы, чтобы основной трафик шёл в обход. Для этого изменяю метрику в igp.
Метрику меняю на самом RR (последнее задание в плейбуке):
https://github.com/Slavkula/my-network/blob/main/playbooks/isis_implementing

4. Добавляю внешние BGP AS как тут: https://github.com/Slavkula/my-network/blob/main/PNG/ver.1.24112023.2.png
Использую плейбук: https://github.com/Slavkula/my-network/blob/main/playbooks/eBGP_peer
После установки Loopback внешнего роутера доступен с любого роутера внутри моей сети.
