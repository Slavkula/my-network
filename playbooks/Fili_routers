- name: Настройка роутеров.
  hosts: fili
  gather_facts: no
  vars:
    ansible_connection: network_cli
    ansible_network_os: ios
    ansible_become: yes
    
  tasks:
    - name: Переменные
      include_vars: "host_vars/{{ inventory_hostname }}.yml"
      
    - name: Apply the provided configuration
      cisco.ios.ios_hostname:
        config:
          hostname: "{{ name1 }}"
        state: merged

    - name: Merge provided configuration with device configuration
      cisco.ios.ios_l3_interfaces:
        config:
          - name: Ethernet0/0
            ipv4:
              - address: "{{ ethout1 }}/30"
          - name: Ethernet0/2
            ipv4:
              - address: "{{ ethins2 }}/30"
        state: merged
